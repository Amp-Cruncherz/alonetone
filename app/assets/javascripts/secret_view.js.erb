//= require jquery
//= require soundmanager2

var soundIsReady = true;

soundManager.debugMode = true;
soundManager.flashVersion = 9;
soundManager.useHTML5Audio = true; /* for acl, baby */
soundManager.consoleOnly = true;
soundManager.url = '<%= asset_path('soundmanager2_flash9.swf')%>';

$(function() {
  $(document).on('click', '.play-button', function(e) {
    e.preventDefault();

    var container = $(this);
    var url = $(this).find('a').attr('href');
    var soundID = url.split('/').pop().split('.')[0];

    container.removeClass('play-button').addClass('pause-button');
    soundManager.createSound({
      id: soundID,
      url: url,
      onfinish: function() {
        container.addClass('play-button');
      }
    }).play();
  });

  $(document).on('click', '.pause-button', function(e) {
    e.preventDefault();

    var container = $(this);
    var url = $(this).find('a').attr('href');
    var soundID = url.split('/').pop().split('.')[0];
    container.removeClass('pause-button').addClass('play-button');
    soundManager.pause(soundID);
  });
});
